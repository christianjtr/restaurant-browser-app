import{r as e,b as F,u as M,j as a,L as _}from"./index-BBvEpnlH.js";import{S as I,f as P}from"./currency.utils-B62R5u1T.js";import{u as T}from"./useRestaurantCatalog-Dhvml_wT.js";import"./restaurant.services-CGmERmkR.js";const B=t=>e.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.96875 3.5C6.39616 3.5 3.5 6.39616 3.5 9.96875C3.5 13.5413 6.39616 16.4375 9.96875 16.4375C13.5413 16.4375 16.4375 13.5413 16.4375 9.96875C16.4375 6.39616 13.5413 3.5 9.96875 3.5ZM2 9.96875C2 5.56773 5.56773 2 9.96875 2C14.3698 2 17.9375 5.56773 17.9375 9.96875C17.9375 14.3698 14.3698 17.9375 9.96875 17.9375C5.56773 17.9375 2 14.3698 2 9.96875Z",fill:"#262638"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5425 14.5432C14.8354 14.2503 15.3103 14.2503 15.6032 14.5432L19.7798 18.7198C20.0727 19.0127 20.0727 19.4875 19.7798 19.7804C19.4869 20.0733 19.012 20.0733 18.7191 19.7804L14.5425 15.6038C14.2496 15.3109 14.2496 14.836 14.5425 14.5432Z",fill:"#262638"})),O=t=>e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5983 3.40171C12.7988 3.60219 12.7988 3.92724 12.5983 4.12772L4.12772 12.5983C3.92724 12.7988 3.60219 12.7988 3.40171 12.5983C3.20122 12.3978 3.20122 12.0728 3.40171 11.8723L11.8723 3.40171C12.0728 3.20122 12.3978 3.20122 12.5983 3.40171Z",fill:"#262638"}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.40171 3.40171C3.60219 3.20122 3.92724 3.20122 4.12772 3.40171L12.5983 11.8723C12.7988 12.0728 12.7988 12.3978 12.5983 12.5983C12.3978 12.7988 12.0728 12.7988 11.8723 12.5983L3.40171 4.12772C3.20122 3.92724 3.20122 3.60219 3.40171 3.40171Z",fill:"#262638"})),Q=t=>e.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75461 2.61533C5.95509 2.41485 6.28014 2.41485 6.48062 2.61533L11.1865 7.32121C11.387 7.52169 11.387 7.84674 11.1865 8.04722L6.48062 12.7531C6.28014 12.9536 5.95509 12.9536 5.75461 12.7531C5.55413 12.5526 5.55413 12.2276 5.75461 12.0271L10.0975 7.68422L5.75461 3.34134C5.55413 3.14086 5.55413 2.81581 5.75461 2.61533Z",fill:"white"}));function Z(t,n,s){var m=this,u=e.useRef(null),f=e.useRef(0),r=e.useRef(null),l=e.useRef([]),i=e.useRef(),h=e.useRef(),b=e.useRef(t),p=e.useRef(!0);b.current=t;var v=typeof window<"u",c=!n&&n!==0&&v;if(typeof t!="function")throw new TypeError("Expected a function");n=+n||0;var C=!!(s=s||{}).leading,x=!("trailing"in s)||!!s.trailing,g="maxWait"in s,L="debounceOnServer"in s&&!!s.debounceOnServer,y=g?Math.max(+s.maxWait||0,n):null;e.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var k=e.useMemo(function(){var S=function(o){var d=l.current,j=i.current;return l.current=i.current=null,f.current=o,h.current=b.current.apply(j,d)},w=function(o,d){c&&cancelAnimationFrame(r.current),r.current=c?requestAnimationFrame(o):setTimeout(o,d)},N=function(o){if(!p.current)return!1;var d=o-u.current;return!u.current||d>=n||d<0||g&&o-f.current>=y},$=function(o){return r.current=null,x&&l.current?S(o):(l.current=i.current=null,h.current)},E=function o(){var d=Date.now();if(N(d))return $(d);if(p.current){var j=n-(d-u.current),A=g?Math.min(j,y-(d-f.current)):j;w(o,A)}},R=function(){if(v||L){var o=Date.now(),d=N(o);if(l.current=[].slice.call(arguments),i.current=m,u.current=o,d){if(!r.current&&p.current)return f.current=u.current,w(E,n),C?S(u.current):h.current;if(g)return w(E,n),S(u.current)}return r.current||w(E,n),h.current}};return R.cancel=function(){r.current&&(c?cancelAnimationFrame(r.current):clearTimeout(r.current)),f.current=0,l.current=u.current=i.current=r.current=null},R.isPending=function(){return!!r.current},R.flush=function(){return r.current?$(Date.now()):h.current},R},[C,g,n,y,x,c,v,L]);return k}function q(t,n){return t===n}function D(t,n){return n}function H(t,n,s){var m=s&&s.equalityFn||q,u=e.useReducer(D,t),f=u[0],r=u[1],l=Z(e.useCallback(function(h){return r(h)},[r]),n,s),i=e.useRef(t);return m(i.current,t)||(l(t),i.current=t),[f,l]}const W=(t,n,s)=>{const[m]=H(n,500),[u,f]=e.useState([]),r=()=>{const i=m.trim().toLowerCase().split(""),h=new Set(i),b=new RegExp(`(i:${i.join("|")})+`,"i"),p=t.filter(({name:v})=>b.test(v)&&Array.from(h).every(c=>v.toLowerCase().includes(c)));f(p)},l=()=>{f([])};return e.useEffect(()=>(m&&m.length>=s&&t.length>0&&r(),()=>{l()}),[m]),{filteredProducts:u,resetFilteredList:l}},K=()=>{const{restaurantId:t}=F(),n=M(),s=3,[m,u]=e.useState(""),{isLoading:f,catalog:r}=T(t),l=r==null?void 0:r.map(({products:c})=>c).flat(),{filteredProducts:i,resetFilteredList:h}=W(l||[],m,s),b=()=>{n(-1)},p=c=>{u(c.currentTarget.value)},v=()=>{u(""),h()};return f?a.jsx(_,{}):a.jsxs("div",{className:"px-6 search-products",children:[a.jsxs("div",{className:"w-full flex justify-between gap-5 my-10 ui-controls",children:[a.jsx("button",{id:"btn-back",name:"btn-back",className:"btn btn-circle background-color--base","data-testid":"btn-back","data-cy":"btn-back",onClick:b,children:a.jsx(I,{})}),a.jsx("div",{className:"flex items-center flex-1",children:a.jsxs("label",{className:"input bg-gray-100 flex items-center gap-2 w-full",children:[a.jsx(B,{}),a.jsx("input",{id:"search-input",name:"search-input",type:"text",className:"grow","data-testid":"search-input","data-cy":"search-input",autoComplete:"off",value:m,onChange:p,placeholder:`La búsqueda iniciará al introducir ${s} caracteres`}),a.jsx("button",{id:"btn-clear-input",name:"btn-clear-input",className:"btn btn-circle btn-sm bg-white","data-testid":"btn-clear-input","data-cy":"btn-clear-input",onClick:v,children:a.jsx(O,{})})]})})]}),a.jsx("div",{children:i==null?void 0:i.map((c,C)=>a.jsxs("div",{className:"flex items-center gap-2 mb-3 color--base",children:[a.jsx("figure",{children:a.jsx("img",{src:c.image,alt:`Product ${c.name}`,width:100,onError:({currentTarget:x})=>{x.src="https://placehold.co/80x80/FFF/CCCCCC?text=No+Image",x.onerror=null}})}),a.jsxs("div",{className:"p-4 flex flex-col justify-between flex-1",children:[a.jsx("div",{className:"font-bold mb-2 poppins-regular text-md",children:c.name}),a.jsx("p",{className:"text-base poppins-semibold",children:P(c.price)})]}),a.jsx("button",{id:`btn-item-${c.name}_${C}`,name:`btn-item-${c.name}_${C}`,className:"btn btn-circle btn-sm list-btn-color--base","data-testid":`btn-item-${c.name}_${C}`,"data-cy":`btn-item-${c.name}_${C}`,children:a.jsx(Q,{})})]},`product_${c.name}_${C}`))})]})};export{K as default};
